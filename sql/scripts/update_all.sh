#!/bin/bash

# ============================================================
# 全テーブル更新スクリプト（DWH + DataMart）
# ============================================================
# 目的: DWHとDataMartを順番に一括更新
# 実行タイミング: 月次（前月データが揃った後）
# 必要な権限: BigQuery Editor以上
# ============================================================

set -e  # エラー時に即座に終了

SCRIPT_DIR="$(dirname "$0")"

echo "========================================="
echo "全テーブル更新処理を開始します"
echo "========================================="

# Step 1: DWH更新
echo ""
echo "Step 1: DWH更新を実行..."
bash "${SCRIPT_DIR}/update_dwh.sh"

# Step 2: DataMart更新
echo ""
echo "Step 2: DataMart更新を実行..."
bash "${SCRIPT_DIR}/update_datamart.sh"

echo ""
echo "========================================="
echo "全テーブル更新処理が完了しました"
echo "========================================="
