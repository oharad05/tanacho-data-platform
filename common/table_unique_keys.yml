# corporate_data テーブルのユニークキー定義
# 重複チェック時に使用

tables:
  # 累積型テーブル（複数フォルダのデータを結合して重複排除が必要）
  billing_balance:
    unique_keys:
      - sales_month
      - branch_code
      - branch_name
    type: cumulative

  profit_plan_term:
    unique_keys:
      - period
      - item
    type: cumulative

  # profit_plan_term_nagasaki: 重複判定スキップ（複数フォルダから同一period+itemのデータがロードされるため）

  # profit_plan_term_fukuoka: 重複判定スキップ（複数フォルダから同一period+itemのデータがロードされるため）

  ms_allocation_ratio:
    unique_keys:
      - year_month
      - branch
      - department
      - category
    type: cumulative

  construction_progress_days_amount:
    unique_keys:
      - property_period
      - branch_code
      - staff_code
      - property_number
      - customer_code
      - contract_date
    type: cumulative

  construction_progress_days_final_date:
    unique_keys:
      - final_billing_sales_date
      - property_number
      - property_data_classification
    type: cumulative

  stocks:
    unique_keys:
      - year_month
      - branch
      - department
      - category
    type: cumulative

  # 単月型テーブル（各CSVがその月のデータのみ含む）
  # sales_target_and_achievements: 重複判定スキップ（データロード時に重複が発生するため）

  # customer_sales_target_and_achievements: 重複判定スキップ（同一期間に複数レコードが存在する仕様のため）

  # ledger_income: 重複判定スキップ（同一伝票日付に複数レコードが存在する仕様のため）

  # ledger_loss: 重複判定スキップ（同一会計月に複数レコードが存在する仕様のため）

  department_summary:
    unique_keys:
      - sales_accounting_period
      - code
    type: monthly

  internal_interest:
    unique_keys:
      - year_month
      - branch
      - category
      - breakdown
    type: monthly

  # スプレッドシート連携テーブル（パーティションなし、全データ洗い替え）
  ss_gs_sales_profit:
    unique_keys:
      - posting_month
      - branch_name
      - sales_office
    type: spreadsheet

  ss_inventory_advance_tokyo:
    unique_keys:
      - posting_month
      - item
    type: spreadsheet

  ss_inventory_advance_nagasaki:
    unique_keys:
      - posting_month
      - item
    type: spreadsheet

  ss_inventory_advance_fukuoka:
    unique_keys:
      - posting_month
      - item
    type: spreadsheet

  # 経営資料（スプレッドシート連携）
  # management_materials_current_month: 重複判定スキップ（同一main_category+secondary_categoryに複数レコードが存在する仕様のため）
