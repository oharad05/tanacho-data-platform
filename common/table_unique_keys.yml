# corporate_data テーブルのユニークキー定義
# 重複チェック時に使用

tables:
  # 累積型テーブル（複数フォルダのデータを結合して重複排除が必要）
  billing_balance:
    unique_keys:
      - sales_month
      - branch_code
      - branch_name
    type: cumulative

  profit_plan_term:
    unique_keys:
      - period
      - item
    type: cumulative

  profit_plan_term_nagasaki:
    unique_keys:
      - period
      - item
    type: cumulative

  profit_plan_term_fukuoka:
    unique_keys:
      - period
      - item
    type: cumulative

  ms_allocation_ratio:
    unique_keys:
      - year_month
      - branch
      - department
      - category
    type: cumulative

  construction_progress_days_amount:
    unique_keys:
      - property_period
      - branch_code
      - staff_code
      - property_number
      - customer_code
      - contract_date
    type: cumulative

  construction_progress_days_final_date:
    unique_keys:
      - final_billing_sales_date
      - property_number
      - property_data_classification
    type: cumulative

  stocks:
    unique_keys:
      - year_month
      - branch
      - department
      - category
    type: cumulative

  # 単月型テーブル（各CSVがその月のデータのみ含む）
  sales_target_and_achievements:
    unique_keys:
      - sales_accounting_period
      - branch_code
      - department_code
      - staff_code
      - major_department_code
      - division_code
    type: monthly

  customer_sales_target_and_achievements:
    unique_keys:
      - sales_accounting_period
      - branch_code
      - customer_code
    type: monthly

  ledger_income:
    unique_keys:
      - slip_date
      - classification_type
      - slip_no
    type: monthly

  ledger_loss:
    unique_keys:
      - accounting_month
      - classification_type
      - slip_no
    type: monthly

  department_summary:
    unique_keys:
      - sales_accounting_period
      - code
    type: monthly

  internal_interest:
    unique_keys:
      - year_month
      - branch
      - category
      - breakdown
    type: monthly

  # スプレッドシート連携テーブル（パーティションなし、全データ洗い替え）
  ss_gs_sales_profit:
    unique_keys:
      - posting_month
      - branch_name
      - sales_office
    type: spreadsheet

  ss_inventory_advance_tokyo:
    unique_keys:
      - posting_month
      - item
    type: spreadsheet

  ss_inventory_advance_nagasaki:
    unique_keys:
      - posting_month
      - item
    type: spreadsheet

  ss_inventory_advance_fukuoka:
    unique_keys:
      - posting_month
      - item
    type: spreadsheet

  # 経営資料（スプレッドシート連携）
  management_materials_current_month:
    unique_keys:
      - main_category
      - secondary_category
    type: spreadsheet
